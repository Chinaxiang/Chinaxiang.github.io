---
layout: post
title: 理解OAuth 2.0
tags: tool
date: 2018-04-02 10:25:00 +800
---

[OAuth](http://en.wikipedia.org/wiki/OAuth)是一个关于授权（authorization）的开放网络标准，在全世界得到广泛应用，目前的版本是2.0版。

本文对OAuth 2.0的设计思路和运行流程，做一个简明通俗的解释。

![](http://ww1.sinaimg.cn/large/937a8a41ly1fz0fftg1s9j209q09pglk.jpg)

## 应用场景

为了理解OAuth的适用场合，让我举一个简单的例子。

有一个"云冲印"的网站，可以将用户储存在QQ的照片，冲印出来。用户为了使用该服务，必须让"云冲印"读取自己储存在QQ上的照片。

![](http://ww1.sinaimg.cn/large/937a8a41ly1fz0fkmiqx0j208c08ca9w.jpg)

问题是只有得到用户的授权，QQ才会同意"云冲印"读取这些照片。那么，"云冲印"怎样获得用户的授权呢？
传统方法是，用户将自己的QQ用户名和密码，告诉"云冲印"，后者就可以读取用户的照片了。这样的做法有以下几个严重的缺点。

- （1）"云冲印"为了后续的服务，会保存用户的密码，这样很不安全。
- （2）QQ不得不部署密码登录，而我们知道，单纯的密码登录并不安全（现在越来越多的平台采用扫码登录了）。
- （3）"云冲印"拥有了获取用户储存在QQ所有资料的权力，用户没法限制"云冲印"获得授权的范围和有效期。
- （4）用户只有修改密码，才能收回赋予"云冲印"的权力。但是这样做，会使得其他所有获得用户授权的第三方应用程序全部失效。
- （5）只要有一个第三方应用程序被破解，就会导致用户密码泄漏，以及所有被密码保护的数据泄漏。

OAuth就是为了解决上面这些问题而诞生的。
